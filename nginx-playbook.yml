- name: Deploy Nginx on Rocky Linux
  hosts: 192.168.1.178
  become: yes

  tasks:
    - name: Install Nginx
      dnf:
        name: nginx
        state: present

    - name: Start and enable Nginx service
      systemd:
        name: nginx
        state: started
        enabled: yes

    - name: Open HTTPs port in firewall
      firewalld:
        service: httpS
        permanent: yes
        state: enabled
      notify: Reload firewalld

  handlers:
    - name: Reload firewalld
      command: firewall-cmd --reload
